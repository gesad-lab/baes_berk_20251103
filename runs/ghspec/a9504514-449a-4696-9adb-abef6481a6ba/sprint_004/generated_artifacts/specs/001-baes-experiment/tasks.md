# Tasks: Add Course Relationship to Student Entity

---
INCREMENTAL DEVELOPMENT CONTEXT

Existing Code to Build Upon:
- `src/models.py` (existing models and database structures)
- `src/app.py` (existing application routes)
- `src/services.py` (existing business logic)
- `src/database.py` (existing database initialization and migration management)
- `tests/test_services.py` (unit tests for services)

---

## Task Breakdown

### 1. Create StudentCourses Model
- [ ] **Task:** Introduce the `StudentCourses` model to manage the relationship between students and courses.  
  **File Path:** `src/models.py`  
  **Details:** Implement the model that includes `student_id` and `course_id`, along with relationships with `Student` and `Course`.

### 2. Update Student and Course Models
- [ ] **Task:** Extend existing `Student` and `Course` models to include relationships for the `StudentCourses` model.  
  **File Path:** `src/models.py`  
  **Details:** Add the necessary relationships ensuring existing functionality remains unchanged.

### 3. Create Migration for StudentCourses Table
- [ ] **Task:** Generate a migration script to create the `student_courses` junction table.  
  **File Path:** (Migration script generated by Alembic tool)  
  **Details:** Use the command: `alembic revision --autogenerate -m "Add StudentCourses junction table"` and execute migration with `alembic upgrade head`.

### 4. Define Enrollment Route
- [ ] **Task:** Implement the `POST /students/{student_id}/courses` endpoint in `app.py`.  
  **File Path:** `src/app.py`  
  **Details:** Define route logic to handle requests for enrolling students in courses.

### 5. Implement Enrollment Logic
- [ ] **Task:** Add business logic for enrolling students in courses in `services.py`.  
  **File Path:** `src/services.py`  
  **Details:** Create functions to validate inputs and handle enrollment, ensuring proper error messages are returned for non-existent students or courses.

### 6. Define Retrieval Route
- [ ] **Task:** Implement the `GET /students/{student_id}/courses` endpoint in `app.py`.  
  **File Path:** `src/app.py`  
  **Details:** Define route logic to retrieve a list of courses associated with a specific student.

### 7. Implement Course Retrieval Logic
- [ ] **Task:** Add business logic for retrieving courses linked to a student in `services.py`.  
  **File Path:** `src/services.py`  
  **Details:** Write functions to fetch courses based on student ID and return them in the expected format.

### 8. Extend Unit Tests for Enrollment
- [ ] **Task:** Update `test_services.py` to include tests for the new enrollment functionality.  
  **File Path:** `tests/test_services.py`  
  **Details:** Create tests to validate successful enrollments and error scenarios for invalid IDs.

### 9. Extend Unit Tests for Course Retrieval
- [ ] **Task:** Update `test_services.py` to include tests for the course retrieval functionality.  
  **File Path:** `tests/test_services.py`  
  **Details:** Create tests to ensure correct retrieval of courses linked to students, including checks for empty responses.

### 10. Conduct API Testing
- [ ] **Task:** Perform manual testing using Postman or curl to validate new functionalities.  
  **File Path:** N/A  
  **Details:** Ensure the API endpoints return expected results for valid and invalid requests for enrollments and course retrieval.

### 11. Update Documentation
- [ ] **Task:** Update `README.md` to reflect the new features and endpoint documentation.  
  **File Path:** `README.md`  
  **Details:** Provide clear instructions on how to use the new API endpoints and details about the enrollment process.

---

This task breakdown ensures each step is small, focused, and can be independently developed and tested, while also maintaining alignment with existing code and structures.