# Tasks: Add Teacher Relationship to Course Entity

---
INCREMENTAL DEVELOPMENT CONTEXT

Existing Code to Build Upon:
- tests/test_courses.py (3233 bytes)
- tests/integration_tests.py (2804 bytes)

## Task Breakdown

### 1. Database Schema Update
- [ ] **Task:** Update the Course model to include `teacher_id` as a foreign key.
  - **File:** `src/models.py`
  - **Details:** Modify the `Course` class to add a new `teacher_id` column, ensuring the relationship with `Teacher` is created.

- [ ] **Task:** Generate migration script to add the `teacher_id` field to the existing courses table.
  - **File:** In migration scripts generated by Alembic.
  - **Details:** Execute `alembic revision --autogenerate -m "Add teacher_id to courses"` command to create the migration.

### 2. CRUD Functionality Implementation
- [ ] **Task:** Implement the business logic for assigning a teacher to a course.
  - **File:** `src/crud.py`
  - **Details:** Create a function `assign_teacher_to_course(course_id, teacher_id)` that updates the course with the given teacher ID.

- [ ] **Task:** Implement the business logic for removing a teacher from a course.
  - **File:** `src/crud.py`
  - **Details:** Create a function `remove_teacher_from_course(course_id)` that sets the `teacher_id` to `None` for the specified course.

### 3. API Layer
- [ ] **Task:** Create the PUT endpoint for assigning a teacher to a course.
  - **File:** `src/main.py`
  - **Details:** Add a FastAPI route that maps to `PUT /courses/{courseId}/assignTeacher` and uses the assigned function.

- [ ] **Task:** Create the DELETE endpoint for removing a teacher from a course.
  - **File:** `src/main.py`
  - **Details:** Add a FastAPI route that maps to `DELETE /courses/{courseId}/removeTeacher` and uses the assigned function.

### 4. Input Validation
- [ ] **Task:** Add request validation logic for course and teacher IDs.
  - **File:** `src/schemas.py`
  - **Details:** Update Pydantic models to include validation for incoming request data to ensure IDs are valid.

### 5. Error Handling
- [ ] **Task:** Implement error messages for invalid course ID.
  - **File:** `src/main.py`
  - **Details:** Ensure the API returns appropriate error responses when course ID is not found.

- [ ] **Task:** Implement error messages for invalid teacher ID.
  - **File:** `src/main.py`
  - **Details:** Ensure the API returns appropriate error responses when teacher ID is not found.

### 6. Testing
- [ ] **Task:** Add unit tests for the new assignment functionality in the test file.
  - **File:** `tests/test_courses.py`
  - **Details:** Add tests to verify successful teacher assignments, invalid course IDs, and invalid teacher IDs.

- [ ] **Task:** Add tests for removing a teacher from a course.
  - **File:** `tests/test_courses.py`
  - **Details:** Implement tests to ensure the removal functionality works as expected returns correct responses.

### 7. Documentation
- [ ] **Task:** Update README.md to document the new feature.
  - **File:** `README.md`
  - **Details:** Include information on new API endpoints, request and response examples related to teacher assignments.

### 8. Integration Testing
- [ ] **Task:** Conduct integration tests for the new endpoints.
  - **File:** `tests/integration_tests.py`
  - **Details:** Test the full flow of assigning and removing teachers through the API to ensure all components work together.

## Conclusion
These tasks have been structured to build upon existing code while introducing the necessary features and ensuring each component is tested and validated independently. The tasks are ordered to respect dependencies, ensuring a logical progression from schema updates to testing.