# Tasks: Add Teacher Relationship to Course Entity

---
INCREMENTAL DEVELOPMENT CONTEXT

Existing Code to Build Upon:
- **src/models/course.py** (Existing Course model)
- **src/services/course_service.py** (Existing service file for Course)
- **src/api/course_api.py** (Existing API for Course)
- **tests/api/test_course_api.py** (Existing tests for Course API)

---

## Task Breakdown

### Task 1: Modify Course Model
- **File**: `src/models/course.py`
- **Description**: Update the `Course` model to include a nullable `teacher_id` attribute, referencing the `Teacher` entity.
- **Dependency**: None
- **Testable**: Ensure the model reflection works as expected.

```python
# Task 1
- [ ] Update the Course model in `src/models/course.py` to include:
    - `teacher_id` reference to the Teacher entity
```

### Task 2: Create Database Migration Script
- **File**: Migration file (generated by Flask-Migrate)
- **Description**: Generate a migration script to alter the `courses` table schema and add the `teacher_id` column while preserving existing data.
- **Dependency**: Task 1
- **Testable**: Verify that migration executes successfully without data loss.

```bash
# Task 2
- [ ] Run migration commands to create and apply schema changes:
    - `flask db migrate -m "Add teacher_id to courses table"`
    - `flask db upgrade`
```

### Task 3: Implement Assign Teacher Logic in Service Module
- **File**: `src/services/course_service.py`
- **Description**: Implement the logic for assigning a teacher to a course in the `assign_teacher_to_course` function.
- **Dependency**: Task 1
- **Testable**: Ensure that the function correctly assigns teachers and raises errors for non-existent courses.

```python
# Task 3
- [ ] Implement the function `assign_teacher_to_course` in `src/services/course_service.py`.
```

### Task 4: Create API Endpoint for Teacher Assignment
- **File**: `src/api/course_api.py`
- **Description**: Add the `POST /courses/{course_id}/assign-teacher/{teacher_id}` endpoint to handle assigning teachers.
- **Dependency**: Tasks 2 and 3
- **Testable**: Validate the endpoint returns expected HTTP responses based on results.

```python
# Task 4
- [ ] Add endpoint logic for assigning a teacher to a course in `src/api/course_api.py`.
```

### Task 5: Create API Endpoint for Course Retrieval
- **File**: `src/api/course_api.py`
- **Description**: Implement the `GET /courses/{course_id}` endpoint that returns course details, including the assigned teacher info.
- **Dependency**: Task 1
- **Testable**: Check if course retrieval includes teacher data when applicable.

```python
# Task 5
- [ ] Implement `GET /courses/{course_id}` endpoint to fetch course info including teacher in `src/api/course_api.py`.
```

### Task 6: Validate Input for Assignments
- **File**: `src/services/course_service.py` (or a separate validation module if created)
- **Description**: Add basic validation checks for input parameters when assigning teachers to courses.
- **Dependency**: Task 3
- **Testable**: Ensure validation logic operates correctly on input.

```python
# Task 6
- [ ] Implement input validation for teacher assignment within `src/services/course_service.py`.
```

### Task 7: Write Unit Tests for Assignment Functionality
- **File**: `tests/api/test_course_api.py`
- **Description**: Create tests for the new functionality of assigning a teacher to a course and retrieving course details.
- **Dependency**: Tasks 4 and 5
- **Testable**: Validate that all tests pass successfully with the new code.

```python
# Task 7
- [ ] Write unit tests for teacher assignment and course retrieval in `tests/api/test_course_api.py`.
```

### Task 8: Update API Documentation
- **File**: API documentation file
- **Description**: Update documentation to reflect new endpoints and expected responses for the API.
- **Dependency**: Tasks 4 and 5
- **Testable**: Confirm documentation accurately describes the new functionality.

```markdown
# Task 8
- [ ] Update API documentation to reflect new functionalities for course-teacher assignment.
```

### Task 9: Review and Conduct Code Review
- **File**: All modified files
- **Description**: Conduct a comprehensive review of code changes for consistency and adherence to coding standards.
- **Dependency**: All previous tasks
- **Testable**: Ensure all changes comply with the project constitution and pass automated tests.

```markdown
# Task 9
- [ ] Review all code changes and submit for code review.
```

### Task 10: Continuous Integration Setup
- **File**: CI/CD configuration file (if applicable)
- **Description**: Ensure Continuous Integration processes run all tests successfully after changes.
- **Dependency**: Task 7
- **Testable**: Verify all tests are executed within the CI/CD builds successfully.

```markdown
# Task 10
- [ ] Ensure tests run in CI/CD after implementation.
```

--- 

This task breakdown breaks down the implementation of the teacher-course relationship into focused, independent tasks that ensure each part can be tested and validated independently while respecting the existing architecture and code style.