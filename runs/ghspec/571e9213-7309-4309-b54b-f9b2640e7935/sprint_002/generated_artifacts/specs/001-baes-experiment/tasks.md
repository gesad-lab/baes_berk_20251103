# Tasks: Add Email Field to Student Entity

---
INCREMENTAL DEVELOPMENT CONTEXT

Existing Code to Build Upon:
- `src/models/student.py`
- `src/schemas/student_schema.py`
- `src/routes/student_routes.py`
- `tests/test_student_routes.py`
- `tests/test_student_model.py`

---

## 1. Update Student Model

- [ ] **Task 1**: Modify the existing Student model to include the email field.
  - **File**: `src/models/student.py`
  - **Details**: Add a new column for `email` as a required unique string.

## 2. Update Schemas

- [ ] **Task 2**: Update the `StudentSchema` to include the email field.
  - **File**: `src/schemas/student_schema.py`
  - **Details**: Add an `email` field with `EmailStr` validation to the schema.

## 3. Update API Routes

- [ ] **Task 3**: Implement the updated POST route for creating a student with email.
  - **File**: `src/routes/student_routes.py`
  - **Details**: Modify the `create_student` function to handle the email field and return the newly created record.

- [ ] **Task 4**: Update the GET route for retrieving student details to include the email.
  - **File**: `src/routes/student_routes.py`
  - **Details**: Ensure the endpoint returns student data, now including email.

## 4. Database Migration

- [ ] **Task 5**: Create a migration script to alter the existing "students" table and add the email field.
  - **File**: Migration script file (to be generated by Alembic)
  - **Details**: Use Alembic to create a migration that transitions the database schema to include the email field while preserving existing data.

## 5. Error Handling Implementation

- [ ] **Task 6**: Implement validation for the email field in the POST route.
  - **File**: `src/routes/student_routes.py`
  - **Details**: Add error handling logic to return meaningful responses for invalid or missing email inputs.

## 6. Write Tests for New Functionality

- [ ] **Task 7**: Write unit tests for the Student model to validate email requirements.
  - **File**: `tests/test_student_model.py`
  - **Details**: Validate model interactions and any constraints for the email field.

- [ ] **Task 8**: Write integration tests for the POST and GET routes related to students.
  - **File**: `tests/test_student_routes.py`
  - **Details**: Test creating a student with valid and invalid emails, and retrieving a student by ID including their email.

## 7. Update Documentation

- [ ] **Task 9**: Update the `README.md` with details about the new email field in the API.
  - **File**: `README.md`
  - **Details**: Document the changes to API contracts and add examples for the new email field.

- [ ] **Task 10**: Auto-generate API documentation to reflect the new schema.
  - **File**: Updates automatically generated by FastAPI
  - **Details**: Ensure the OpenAPI documentation includes the email field for relevant requests and responses.

---

This structured approach to tasks allows for incremental implementation of the email field feature while aligning with existing code structure and quality principles. Each task is small, scoped to a specific file, and can be independently tested.