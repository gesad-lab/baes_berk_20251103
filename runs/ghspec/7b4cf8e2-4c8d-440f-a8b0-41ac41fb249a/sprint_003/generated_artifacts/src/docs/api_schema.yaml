```python
import pytest
from fastapi.testclient import TestClient
from src.api import app

client = TestClient(app)

def test_create_course_invalid_name():
    response = client.post("/courses", json={"name": "", "level": "Beginner"})
    assert response.status_code == 400
    assert response.json()["error"]["code"] == "E001"
    assert "Course name and level are required." in response.json()["error"]["message"]

def test_create_course_invalid_level():
    response = client.post("/courses", json={"name": "Math 101", "level": ""})
    assert response.status_code == 400
    assert response.json()["error"]["code"] == "E001"
    assert "Course name and level are required." in response.json()["error"]["message"]

def test_update_course_invalid_input():
    response = client.put("/courses/1", json={"name": "", "level": ""})  # Assuming course ID 1 exists
    assert response.status_code == 400
    assert response.json()["error"]["code"] == "E001"
    assert "Course name and level are required." in response.json()["error"]["message"]

def test_update_nonexistent_course():
    response = client.put("/courses/999", json={"name": "Math 201", "level": "Intermediate"})  # ID 999 does not exist
    assert response.status_code == 404
    assert response.json()["error"]["code"] == "E002"
    assert "Course not found." in response.json()["error"]["message"]
```