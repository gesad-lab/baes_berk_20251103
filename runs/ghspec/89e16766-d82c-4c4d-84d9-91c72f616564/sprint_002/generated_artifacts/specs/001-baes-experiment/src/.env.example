```python
import pytest
from flask import json
from app import create_app, db
from app.models import Student

@pytest.fixture(scope='module')
def test_client():
    app = create_app('testing')
    
    # Create a test client using the Flask application configured for testing
    with app.test_client() as client:
        with app.app_context():
            # Create all tables in the database
            db.create_all()
            yield client
            # Cleanup after tests
            db.drop_all()

def test_create_student_with_valid_email(test_client):
    """Test creation of a student with a valid email address."""
    response = test_client.post('/students', data=json.dumps({
        "name": "John Doe",
        "email": "johndoe@example.com"
    }), content_type='application/json')
    
    assert response.status_code == 201  # Ensure a successful creation
    data = json.loads(response.data)
    assert data['message'] == "Student created successfully."
    assert 'student_id' in data  # Check if student ID is provided

def test_create_student_with_invalid_email(test_client):
    """Test creation of a student with an invalid email address."""
    response = test_client.post('/students', data=json.dumps({
        "name": "Jane Doe",
        "email": "invalid-email"
    }), content_type='application/json')
    
    assert response.status_code == 400  # Ensure bad request status
    data = json.loads(response.data)
    assert data['error']['code'] == "E001"  # Assume E001 corresponds to 'Invalid email format'
    assert "Invalid email format" in data['error']['message']  # Check if appropriate message is provided

def test_get_student_by_id(test_client):
    """Test retrieval of a student by ID."""
    # First, create a student
    create_response = test_client.post('/students', data=json.dumps({
        "name": "John Doe",
        "email": "johndoe@example.com"
    }), content_type='application/json')
    
    student_id = json.loads(create_response.data)['student_id']
    
    # Now retrieve the student by ID
    response = test_client.get(f'/students/{student_id}')
    assert response.status_code == 200  # Check for successful retrieval
    student_data = json.loads(response.data)
    
    assert student_data['id'] == student_id
    assert student_data['email'] == "johndoe@example.com"  # Check if email matches

def test_get_student_by_name(test_client):
    """Test retrieval of a student by name."""
    # First, create a student
    create_response = test_client.post('/students', data=json.dumps({
        "name": "Alice Smith",
        "email": "alice@example.com"
    }), content_type='application/json')
    
    # Retrieve by name
    response = test_client.get('/students/Alice Smith')
    assert response.status_code == 200  # Check for successful retrieval
    student_data = json.loads(response.data)
    
    assert student_data['name'] == "Alice Smith"
    assert student_data['email'] == "alice@example.com"  # Check if email matches
```